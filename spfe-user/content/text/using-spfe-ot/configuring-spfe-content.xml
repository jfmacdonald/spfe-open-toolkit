<?xml version="1.0" encoding="UTF-8"?>

<think-plan-do-topic xmlns="http://spfeopentoolkit.org/ns/spfe-docs"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://spfeopentoolkit.org/ns/spfe-docs http://spfeopentoolkit.org/spfe-docs/topic-types/generic-topic/schemas/generic-topic.xsd">
 
    <head>
        <id>configure-spfe-content</id>
        <history>
            <revision>
                <date>2014-11-26</date>
                <author>jfmacdonald</author>
                <comment>New topic</comment>
                <status>In progress</status>
            </revision>
        </history>
        <index>
            <entry>
                <type>task</type>
                <term>configure</term>
            </entry>
            <entry>
                <type>feature</type>
                <term>content-set</term>
            </entry>
            <entry>
                <type>feature</type>
                <term>topic-set</term>
            </entry>
        </index>
    </head>
    <body>
        <title>Configuring the SPFE Open Toolkit to process content</title>

        <understanding>

            <p> The SPFE Open Toolkit (SPFE-OT) must be configured to control how it builds output
                from source XML markup. One or more configuration files specifies which source
                content will be processed, how it will be processed, and how it will be organized
                and linked. Together, the configuration files are the master plan for a SPFE build.
            </p>
        
        </understanding>

        <planning>

            <p> SPFE Open Toolkit configuration consists of the following major sections:</p>

            <ul>
                <li>
                    <p> A <feature>content-set</feature> configuration, which identifies topic-sets
                        to be included in the build and how they should be organized.</p>
                </li>
                <li>
                    <p> One or more <feature>topic-set</feature> configurations, which identifies
                        source topics for the set and how they are to be processed.</p>
                </li>
                <li>
                    <p> A <feature>topic-type</feature> configuration for each type of topic in the
                        content set. The topic-type configuration specifies an <term>XML
                        Schema</term> and the set of <term>XSLT</term> scripts that will be used to
                        build output.</p>
                </li>
                <li>
                    <p> An <feature>output-format</feature> configuration for each output media.</p>
                </li>

            </ul>
            
            <p> To create a body of content, an author will need to be concerned with the first two,
                content-set and topic-set configurations, which identify content source.
                Configuring topic types and output formats is not content specific and should be
                done beforehand by a SPFE Open Toolkit developer.</p>
            
            <subhead>Configuration files</subhead>

            <p> While configuration could be set in a single configuration file, in most cases
                it will be convenient to create one file configure the content-set, a separate
                file for each topic-set, and a configuration file for each topic type and
                output format. The first stage of the SPFE-OT build process will be to merge all
                into a single configuration that will be used for the build.</p>
            
            <p> The content-set configuration file will be the entry point for the build process;
                it will be specified as the first argument of the <feature>spfe</feature> command
                that starts the build process. The content-set configuration file will reference
                topic-set configuration files and output-format configuration files, and topic-set
                configuration files will, in turn, reference typic-type configuration files along
                with source files and other resources.</p>
            
            <p> The content-set and topic-set configuration files may reside anywhere in the
                filesystem that is convenient for the author. References to configuration, source,
                and other files may be relative or absolute path names. A common setup has the
                content-set configuration file in the working directory, where the <feature>spfe
                </feature> command will be executed and log files kept, with topic-set configuration
                files and content files in subdirectories and referenced with relative paths. This
                way the entire set can be relocated without needing to edit configuration files.</p>
            
            <subhead>Organization</subhead>
            
            <p> The SPFE build system will, by default, organize topics hierarchically with topic
                sets in separate groups and topics organized by topic type within a topic set. The
                build system will generate table of contents (TOC) with this organization to aid
                navigation. These TOCs are not the only navigation aids the build system generates;
                the system also creates subject-affinity links (<feature>soft links</feature>)
                and subject index lists. Nevertheless, hierarchical navigation is one way that
                content users will find what they want.</p>
            
            <p> Source content may be identified in topic-set configuration files with wildcards
                in file pathnames. The asterisk "*" matches any set of characters except for the
                path-hierarchy separator, so that <code> &lt;include&gt;
                ../content/text/my-topic-set/*.xml &lt;/include&gt; </code> will include all the XML
                files in the "my-topic-set" directory. Thus, best practice is to keep topic source
                files in directories that correspond to topic sets.</p>
            
            <subhead>Planning content-set configuration</subhead>
            
            <p> A content-set configuration must specify the following.</p>
            <ul>
                <li>
                    <p> <config-setting>/spfe/content-set/content-set-id</config-setting>: A unique
                        content-set identifier, which will be the name of the sub-directory under
                        the <feature>SPFE_BUILD_DIR</feature> directory where the content set will
                        be generated. </p>
                </li>
                <li>
                    <p> <config-setting>/spfe/content-set/title</config-setting>: The title that
                        will appear on the generated home page for the content set.</p>
                </li>
                <li>
                    <p> <config-setting>/spfe/content-set/topic-set-type-order</config-setting>:
                        Specify the order in which topic sets will appear in the generated table of
                        contents.</p>
                </li>
                <li>
                    <p> <config-setting>/spfe/content-set/home-topic-set</config-setting>:
                        Set the topic that will be the home or first page in the content set's
                        output. The home topic set must be among the listed topic sets.</p>
                </li>
                <li>
                    <p> <config-setting>/spfe/content-set/topic-sets</config-setting>:
                        List the topic sets to be included in the content set.</p>
                </li>
                <li>
                    <p> <config-setting>/spfe/content-set/subject-types</config-setting>:
                        Specify the <feature>subject-affinity</feature>tags that the build system
                        may recognize in forming subject-affinity lists. Topics may include an index
                        of terms, each of which is associated with a subject type defined in the
                        content-set configuration, so that they may be come the target of <feature>
                        soft linking</feature>.</p>
                </li>
            </ul>
            
            <p> A content-set configuration may optionally specify the following.</p>
            <ul>
                <li>
                    <p> <config-setting>/spfe/content-set/condition-tokens</config-setting>:
                        Specify tokens for conditional inclusion of content <feature>fragments
                        </feature> in output.</p>
                </li>
                <li>
                    <p> <config-setting>/spfe/content-set/messages</config-setting>: Specify
                        the type of messages (info and warning) to include in the build log.</p>
                </li>
                <li>
                    <p> <config-setting>/spfe/content-set/output-formats</config-setting>:
                        Specify output formats.</p>
                </li>
                <li>
                    <p> <config-setting>/spfe/content-set/strings</config-setting>:
                        Identify strings that may be included in content when referenced.</p>
                </li>
            </ul>

        </planning>

        <doing>
            <p>Create an XML file in the <feature>content set</feature> configuration structure and locate
            it in the same directory you will execute <task>builds</task>.</p>
            
        </doing>

    </body> 
</think-plan-do-topic>
