<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:lf="local-functions" xmlns:config="http://spfeopentoolkit.org/ns/spfe-ot/config" xmlns:gr="http://spfeopentoolkit.org/ns/eppo-simple/objects/graphics" xmlns:sf="http://spfeopentoolkit.org/spfe-ot/1.0/functions" xml:lang="en" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Function: first-n-words</title><link rel="stylesheet" type="text/css" href="style/eppo-simple.css"><link rel="stylesheet" type="text/css" href="style/css-tree.css"></head><body><div id="main-container"><div id="main">
      <p>
            <a href="../index.html" class="default" title="">SPFE Documentation</a>
            
            | 
            
               <a href="../spfe-docs-home-toc.html" class="default" title="">Collections</a>
             &gt; 
               <a href="spfe-function-reference-toc.html" class="default" title="">SPFE Function Reference</a>
             &gt; first-n-words</p>
      <h1>Function: first-n-words</h1>
      <p>
         <b class="decoration-bold">first-n-words(text as item()*, words as xs:integer, suffix as xs:string) as item()*</b>
      </p>
      <dl>
         <dt>Description</dt>
         <dd>
                <p>Returns that first number of words of a specified string, and optionally adds a specified suffix. For example, calling this function like this:</p>
                <pre>&lt;xsl:value-of select="sf:first-n-words('The quick brown fox', 3, '...')/&gt;</pre>
                
                <p>Will return:</p>
                
                <pre>The quick brown ...</pre>
                <p>This is useful for creating exerpts of a text to appear in a list or to lable a link.</p>
            </dd>
      </dl>
      <dl>
         <dt>Return value</dt>
         <dd>
            <p>Return type: item()*</p>
                    <p>The truncated string with the specified prefix. If there number of words in the string is less than or equal to the number specified in the <tt class="decoration-code">words</tt> parameter, the whole string is returned. The function recognizes words by matching spaces between words. The returned string includes the final space after the late matched world, if one exists in the input string. The suffix is added after this space. If specified, the suffix is always added, even if the whole string is returned.</p>
                </dd>
      </dl>
      <dl>
         <dt>Source file</dt>
         <dd>
            <p>$SPFEOT_HOME/1.0/scripts/common/utility-functions.xsl</p>
         </dd>
      </dl>
      <h3>Parameters</h3>
      <dl>
         <dt>text</dt>
         <dd>
            <p>Type: item()*</p>
                        <p>The string to be truncated.</p>
                    </dd>
      </dl>
      <dl>
         <dt>words</dt>
         <dd>
            <p>Type: xs:integer</p>
                        <p>The number of words to be returned.</p>
                    </dd>
      </dl>
      <dl>
         <dt>suffix</dt>
         <dd>
            <p>Type: xs:string</p>
                        <p>The suffix string to be added to the returned string.</p>
                    </dd>
      </dl>
      <h3>Definition</h3>
      <pre>
            &lt;xsl:function name="sf:first-n-words"&gt;
		             &nbsp;&nbsp;&lt;xsl:param name="text"/&gt;
		             &nbsp;&nbsp;&lt;xsl:param name="words"&nbsp;as="xs:integer"/&gt;
		             &nbsp;&nbsp;&lt;xsl:param name="suffix"&nbsp;as="xs:string"/&gt;
		             &nbsp;&nbsp;&lt;xsl:variable name="text-string"&nbsp;select="normalize-space(string($text))"/&gt;
		             &nbsp;&nbsp;&lt;xsl:variable name="regex"&nbsp;select="concat('^([^\s]+\s*){1,', $words, '}')"/&gt;
		             &nbsp;&nbsp;&lt;xsl:if test="$text-string"&gt;
			               &nbsp;&nbsp;&nbsp;&nbsp;&lt;xsl:analyze-string select="$text-string"&nbsp;regex="{$regex}"&nbsp;flags="s"&gt;
				                 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xsl:matching-substring &gt;
					                   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;xsl:value-of select="concat(regex-group(0), $suffix)"/&gt;
				                 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/xsl:matching-substring&gt;
			               &nbsp;&nbsp;&nbsp;&nbsp;&lt;/xsl:analyze-string&gt;
		             &nbsp;&nbsp;&lt;/xsl:if&gt;
	           &lt;/xsl:function&gt;
         </pre>
   </div></div><div id="footer"><br><br><hr><p>Generated on 2018-04-23 16:05:34.</p></div></body></html>