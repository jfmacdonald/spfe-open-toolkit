<?xml version="1.0" encoding="UTF-8"?>
<!-- This file is part of the SPFE Open Toolkit. See the accompanying license.txt file for applicable licenses.-->
<!-- (c) Copyright Analecta Communications Inc. 2012 All Rights Reserved. -->
<?xml-stylesheet type="text/css" href="../../style/authoring/spfe-docs.css"?>
<generic-topic xmlns="http://spfeopentoolkit.org/spfe-docs/schemas/authoring/generic-topic"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://spfeopentoolkit.org/spfe-docs/schemas/authoring/generic-topic
    http://spfeopentoolkit.org/spfe-docs/schemas/authoring/generic-topic.xsd">
    
    <head>
        <uri>http://spfeopentoolkit.org/spfe-docs/content/tasks/dummy.xml</uri>
        <author>jkeffer</author>
        <status>In progress</status>
        <history>
            <revision>
                <date>2012-07-19</date>
                <author>jkeffer</author>
                <comment>New topic</comment>
                <new-status>In progress</new-status>
            </revision>
        </history>
        <index>
            <entry>
                <type>feature</type>
                <term>{build directory} structure</term>
            </entry>
        </index>
    </head>
    <body>
        <title>File and directory structure</title>
        <p>If you want use the SPFE Toolkit build system in an automated build, it is helpful to
            understand the directory elements to enable you to organize your directory structure,
            and locate files for status reporting and troubleshooting. This section explains the
            environment variables, the elements, and their relationships.</p>
        <ul>
            <li>
                <p>SPFE_BUILD_DIR: Environmnent variable set in the <tool-name>spfe</tool-name>
                    build tool file. Default value: $HOME/spfebuild. Stores ANT property and file
                    definitions  generated by the script config.xsl during the build in a
                    subdirectory <directory-name>temp</directory-name>. To change it, edit spfe.sh
                    (Linux) or spfe.bat. (Windows).</p>
            </li>
            <li>
                <p><xml-element-name>/spfe/build/build-directory</xml-element-name>: Stores scripts,
                    the fully resolved configuration files, and logs generated by the script
                    config.xsl for each topic set during the build.  Value if not defined:
                    SPFE_BUILD_DIR/doc-set@id/topic-set-id. </p>
            </li>
            <li>
                <p><xml-element-name>/spfe/build/output-directory</xml-element-name> Stores the
                    final output of the documentation set (HTML, PDF, etc.) generated by the
                    formatting or encoding script. Value if undefined: None. The EPPO default
                    scripts fail if this element is not defined.</p>
            </li>
            <li>
                <p><xml-element-name>/spfe/build/link-catalog-directory</xml-element-name>Stores the
                    link catalogs generated by the link catalog script. Value if undefined: None.
                    The <xml-element-name>/spfe/sources/link-catalog</xml-element-name> element must
                    include this directory path. The build fails if you do not define this element
                    and you include the directory in the sources element. If you do not use a link
                    catalog, the build does not generate links.</p>
            </li>
            <li>
                <p><xml-element-name>/spfe/build/toc-directory</xml-element-name>: Stores the toc
                    files generated by the presentation script. Value if undefined: None. The
                    <xml-element-name>/spfe/sources/tocs</xml-element-name> element must include
                    this directory path. The build fails if you do not define this element and you
                    include the directory in the sources element. If you do not define a tocs
                    element, the output does not show a table of contents; the build generates the
                    toc files, but the presentation scripts do not include them.</p>
            </li>
            <li>
                <p><xml-element-name>/spfe/deployment/output-path</xml-element-name>: The path is
                    relative to <xml-element-name>/spfe/build/output-directory</xml-element-name>.
                    Store the output generated by the formatting or encoding script for each topic
                    set in a subdirectory of the directory defined in this element.Value if
                    undefined: The value of the element
                    <xml-element-name>/spfe/build/output-directory</xml-element-name>.</p>
            </li>
        </ul>
        <p>The directory structure for the SPFE docs separates the files generated and used during
            the build from the final output of the documentation set. The directory structure
            is:</p>
        <p>build-directory: each topic set defines the element, and uses
            <code>$HOME/spfebuild/build</code> as the root directory. For example, the SPFE
            Development Tasks topic set defines this element as
            <code>$HOME/spfebuild/build/tasks</code>.</p>
        <p>link-catalog-directory: <code>$HOME/spfebuild/build/link-catalogs</code></p>
        <p>toc-directory: <code>$HOME/spfebuild/build/tocs</code></p>
        <p>output-directory: <code>$HOME/spfebuild/spfe-docs</code></p>
        <p>output-path for each topic set:
            <code>output/&lt;topic-set-id> (resolves to $HOME/spfebuild/spfe-docs/output/&lt;topic-set-id>)</code></p>
    </body>
</generic-topic>